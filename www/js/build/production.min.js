angular.module("starter.controllers").controller("CurrencyCtrl",function(a,b,c,d,e,f){a.currency=c.get(b.currencyId),a.timeOffset="week",a.changeTimeOffset=function(b){a.timeOffset=b,d.getRateArray(a.currency.idNBRB,a.timeOffset,function(b){var c=new X2JS,d=c.xml2json(b),e=d.Currency.Record;a.rateArray=e,f.buildChart(e),a.$apply()})},d.getLiveRate(a.currency.id).then(function(b){a.liveRate=b}),d.getLiveRateByNBRB().done(function(b){for(var c=new X2JS,d=c.asArray(b),e=c.xml2json(d[0]),f=e.DailyExRates.Currency,g=0;g<f.length;g++)f[g].CharCode===a.currency.id&&(a.liveRateByNBRB=Math.floor(f[g].Rate))}),d.getRateArray(a.currency.idNBRB,a.timeOffset,function(b){var c=new X2JS,d=c.xml2json(b),e=d.Currency.Record;a.rateArray=e,f.buildChart(e)}),a.convertDateNBRB=e.convertDateNBRB()}),angular.module("starter.controllers").controller("ListCtrl",function(a,b){a.list=b.all()}),angular.module("starter.controllers",[]),angular.module("starter.services").factory("ChartFactory",function(){return{buildChart:function(a){if(a&&a.length){for(var b=a.length,c=new Array(b),d=new Array(b),e=0;b>e;e++)c[e]=a[e].Rate,d[e]=a[e]._Date;var f=3;b>100&&(f=0);var g=document.getElementById("myChart");new Chart(g,{type:"line",data:{labels:d,datasets:[{label:"Rate",data:c,backgroundColor:"rgba(254, 201, 0, 0.3)",borderWidth:2,pointBorderWidth:0,pointRadius:f}]},options:{title:{display:!1},legend:{display:!1},animation:{duration:300}}})}}}}),angular.module("starter.services").factory("CurrencyFactory",function(){var a=[{id:"USD",country:"USA",description:"United States Dollar",idNBRB:145},{id:"EUR",country:"Europe",description:"Euro",idNBRB:19},{id:"RUB",country:"Russia",description:"Russian Ruble",idNBRB:190},{id:"UAH",country:"Ukraine",description:"Ukrainian Hryvnia",idNBRB:224},{id:"CNY",country:"Japan",description:"Japanese Yen",idNBRB:254}];return{all:function(){return a},get:function(b){for(var c=0;c<a.length;c++)if(a[c].id===b)return a[c];return null}}}),angular.module("starter.services").factory("DateFactory",function(){var a=function(a,b){if("mm/dd/yyyy"===b){var c=a.getDate(),d=a.getMonth()+1,e=a.getFullYear();10>c&&(c="0"+c),10>d&&(d="0"+d);var a=d+"/"+c+"/"+e;return a}};return{convertDateNBRB:function(){return function(a){var b=a.split("/");return b[1]+"."+b[0]+"."+b[2]}},dateToFormat:a,getTodayDate:function(b){var c=new Date;return a(c,b)},getHistoryDate:function(b,c){if("mm/dd/yyyy"===c){var d=new Date;switch(b){case"week":d.setDate(d.getDate()-7);break;case"month":d.setMonth(d.getMonth()-1);break;case"year":d.setYear(d.getFullYear()-1)}return a(d,c)}}}}),angular.module("starter.services").factory("HttpService",function(a,b){var c="http://apilayer.net/api/",d="a3d9ac994b72ff6f89ed48dc83b2a813",e="http://www.nbrb.by/Services/XmlExRates.aspx",f="http://www.nbrb.by/Services/XmlExRatesDyn.aspx";new Array;return{getLiveRate:function(b){return a.get(c+"live?access_key="+d+"&currencies=BYR,"+b).then(function(a){var c=a.data.quotes,d=c["USD"+b],e=c.USDBYR,f=Math.floor(e/d);return f})},getRateArray:function(a,c,d){var e=b.getTodayDate("mm/dd/yyyy"),g=b.getHistoryDate(c,"mm/dd/yyyy");$.ajax({type:"GET",url:f+"?curId="+a+"&fromDate="+g+"&toDate="+e,dataType:"xml",success:d})},getLiveRateByNBRB:function(a){return $.ajax({type:"GET",url:e,dataType:"xml"})}}}),angular.module("starter.services",[]),angular.module("starter",["ionic","starter.controllers","starter.services"]).run(function(a){a.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault()})}).config(function(a,b){a.state("list",{url:"/list",templateUrl:"templates/list.html",controller:"ListCtrl"}).state("currency",{url:"/list/:currencyId",templateUrl:"templates/currency.html",controller:"CurrencyCtrl"}),b.otherwise("list")});